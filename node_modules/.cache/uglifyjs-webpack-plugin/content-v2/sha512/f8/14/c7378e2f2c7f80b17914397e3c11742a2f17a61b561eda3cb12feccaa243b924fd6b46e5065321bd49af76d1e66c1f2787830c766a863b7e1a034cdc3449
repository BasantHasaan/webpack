{"map":"{\"version\":3,\"sources\":[\"webpack/bootstrap\",\"/home/basanthassan/webpack/src/2048-master/js/bind_polyfill.js\",\"/home/basanthassan/webpack/src/2048-master/js/classlist_polyfill.js\",\"/home/basanthassan/webpack/src/2048-master/js/animframe_polyfill.js\",\"/home/basanthassan/webpack/src/2048-master/js/tile.js\",\"/home/basanthassan/webpack/src/2048-master/js/grid.js\",\"/home/basanthassan/webpack/src/2048-master/js/local_storage_manager.js\",\"/home/basanthassan/webpack/src/2048-master/js/game_manager.js\",\"/home/basanthassan/webpack/src/2048-master/js/keyboard_input_manager.js\",\"/home/basanthassan/webpack/src/2048-master/js/html_actuator.js\",\"/home/basanthassan/webpack/src/2048-master/js/application.js\"],\"names\":[\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"modules\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"Function\",\"target\",\"self\",\"this\",\"args\",\"Array\",\"apply\",\"window\",\"Element\",\"document\",\"documentElement\",\"push\",\"splice\",\"join\",\"DOMTokenList\",\"add\",\"token\",\"contains\",\"el\",\"className\",\"toString\",\"indexOf\",\"item\",\"index\",\"remove\",\"length\",\"toggle\",\"obj\",\"prop\",\"__defineGetter__\",\"defineElementGetter\",\"HTMLElement\",\"classes\",\"replace\",\"split\",\"lastTime\",\"vendors\",\"x\",\"requestAnimationFrame\",\"cancelAnimationFrame\",\"callback\",\"currTime\",\"Date\",\"getTime\",\"timeToCall\",\"Math\",\"max\",\"id\",\"setTimeout\",\"clearTimeout\",\"Tile\",\"position\",\"y\",\"previousPosition\",\"mergedFrom\",\"savePosition\",\"updatePosition\",\"serialize\",\"Grid\",\"size\",\"previousState\",\"cells\",\"fromState\",\"empty\",\"row\",\"state\",\"tile\",\"randomAvailableCell\",\"availableCells\",\"floor\",\"random\",\"eachCell\",\"cellsAvailable\",\"cellAvailable\",\"cell\",\"cellOccupied\",\"cellContent\",\"withinBounds\",\"insertTile\",\"removeTile\",\"cellState\",\"LocalStorageManager\",\"bestScoreKey\",\"gameStateKey\",\"supported\",\"localStorageSupported\",\"storage\",\"localStorage\",\"fakeStorage\",\"_data\",\"setItem\",\"val\",\"String\",\"getItem\",\"undefined\",\"removeItem\",\"clear\",\"error\",\"getBestScore\",\"setBestScore\",\"score\",\"getGameState\",\"stateJSON\",\"JSON\",\"parse\",\"setGameState\",\"gameState\",\"stringify\",\"clearGameState\",\"GameManager\",\"InputManager\",\"Actuator\",\"StorageManager\",\"inputManager\",\"storageManager\",\"actuator\",\"startTiles\",\"on\",\"move\",\"restart\",\"keepPlaying\",\"setup\",\"continueGame\",\"isGameTerminated\",\"over\",\"won\",\"grid\",\"addStartTiles\",\"actuate\",\"addRandomTile\",\"bestScore\",\"terminated\",\"prepareTiles\",\"moveTile\",\"direction\",\"vector\",\"getVector\",\"traversals\",\"buildTraversals\",\"moved\",\"forEach\",\"positions\",\"findFarthestPosition\",\"next\",\"merged\",\"farthest\",\"positionsEqual\",\"movesAvailable\",\"0\",\"1\",\"2\",\"3\",\"pos\",\"reverse\",\"previous\",\"tileMatchesAvailable\",\"other\",\"first\",\"second\",\"KeyboardInputManager\",\"events\",\"navigator\",\"msPointerEnabled\",\"eventTouchstart\",\"eventTouchmove\",\"eventTouchend\",\"listen\",\"event\",\"emit\",\"data\",\"callbacks\",\"touchStartClientX\",\"touchStartClientY\",\"map\",\"38\",\"39\",\"40\",\"37\",\"75\",\"76\",\"74\",\"72\",\"87\",\"68\",\"83\",\"65\",\"addEventListener\",\"modifiers\",\"altKey\",\"ctrlKey\",\"metaKey\",\"shiftKey\",\"mapped\",\"which\",\"preventDefault\",\"bindButtonPress\",\"gameContainer\",\"getElementsByClassName\",\"touches\",\"targetTouches\",\"pageX\",\"pageY\",\"clientX\",\"clientY\",\"touchEndClientX\",\"touchEndClientY\",\"changedTouches\",\"dx\",\"absDx\",\"abs\",\"dy\",\"absDy\",\"selector\",\"fn\",\"button\",\"querySelector\",\"HTMLActuator\",\"tileContainer\",\"scoreContainer\",\"bestContainer\",\"messageContainer\",\"metadata\",\"clearContainer\",\"column\",\"addTile\",\"updateScore\",\"updateBestScore\",\"message\",\"clearMessage\",\"container\",\"firstChild\",\"removeChild\",\"wrapper\",\"createElement\",\"inner\",\"positionClass\",\"applyClasses\",\"classList\",\"textContent\",\"appendChild\",\"element\",\"setAttribute\",\"normalizePosition\",\"difference\",\"addition\",\"type\",\"getElementsByTagName\"],\"mappings\":\"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\",\"sourcesContent\":[\" \\t// The module cache\\n \\tvar installedModules = {};\\n\\n \\t// The require function\\n \\tfunction __webpack_require__(moduleId) {\\n\\n \\t\\t// Check if module is in cache\\n \\t\\tif(installedModules[moduleId]) {\\n \\t\\t\\treturn installedModules[moduleId].exports;\\n \\t\\t}\\n \\t\\t// Create a new module (and put it into the cache)\\n \\t\\tvar module = installedModules[moduleId] = {\\n \\t\\t\\ti: moduleId,\\n \\t\\t\\tl: false,\\n \\t\\t\\texports: {}\\n \\t\\t};\\n\\n \\t\\t// Execute the module function\\n \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n\\n \\t\\t// Flag the module as loaded\\n \\t\\tmodule.l = true;\\n\\n \\t\\t// Return the exports of the module\\n \\t\\treturn module.exports;\\n \\t}\\n\\n\\n \\t// expose the modules object (__webpack_modules__)\\n \\t__webpack_require__.m = modules;\\n\\n \\t// expose the module cache\\n \\t__webpack_require__.c = installedModules;\\n\\n \\t// define getter function for harmony exports\\n \\t__webpack_require__.d = function(exports, name, getter) {\\n \\t\\tif(!__webpack_require__.o(exports, name)) {\\n \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n \\t\\t}\\n \\t};\\n\\n \\t// define __esModule on exports\\n \\t__webpack_require__.r = function(exports) {\\n \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n \\t\\t}\\n \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n \\t};\\n\\n \\t// create a fake namespace object\\n \\t// mode & 1: value is a module id, require it\\n \\t// mode & 2: merge all properties of value into the ns\\n \\t// mode & 4: return value when already ns object\\n \\t// mode & 8|1: behave like require\\n \\t__webpack_require__.t = function(value, mode) {\\n \\t\\tif(mode & 1) value = __webpack_require__(value);\\n \\t\\tif(mode & 8) return value;\\n \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n \\t\\tvar ns = Object.create(null);\\n \\t\\t__webpack_require__.r(ns);\\n \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n \\t\\treturn ns;\\n \\t};\\n\\n \\t// getDefaultExport function for compatibility with non-harmony modules\\n \\t__webpack_require__.n = function(module) {\\n \\t\\tvar getter = module && module.__esModule ?\\n \\t\\t\\tfunction getDefault() { return module['default']; } :\\n \\t\\t\\tfunction getModuleExports() { return module; };\\n \\t\\t__webpack_require__.d(getter, 'a', getter);\\n \\t\\treturn getter;\\n \\t};\\n\\n \\t// Object.prototype.hasOwnProperty.call\\n \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n\\n \\t// __webpack_public_path__\\n \\t__webpack_require__.p = \\\"/\\\";\\n\\n\\n \\t// Load entry module and return exports\\n \\treturn __webpack_require__(__webpack_require__.s = 1);\\n\",\"export const Poly = Function.prototype.bind = Function.prototype.bind || function (target) {\\n  var self = this;\\n  return function (args) {\\n    if (!(args instanceof Array)) {\\n      args = [args];\\n    }\\n    self.apply(target, args);\\n  };\\n};\\n\",\"export const Classlist = (function () {\\n  if (typeof window.Element === \\\"undefined\\\" ||\\n      \\\"classList\\\" in document.documentElement) {\\n    return;\\n  }\\n\\n  var prototype = Array.prototype,\\n      push = prototype.push,\\n      splice = prototype.splice,\\n      join = prototype.join;\\n\\n  function DOMTokenList(el) {\\n    this.el = el;\\n    // The className needs to be trimmed and split on whitespace\\n    // to retrieve a list of classes.\\n    var classes = el.className.replace(/^\\\\s+|\\\\s+$/g, '').split(/\\\\s+/);\\n    for (var i = 0; i < classes.length; i++) {\\n      push.call(this, classes[i]);\\n    }\\n  }\\n\\n  DOMTokenList.prototype = {\\n    add: function (token) {\\n      if (this.contains(token)) return;\\n      push.call(this, token);\\n      this.el.className = this.toString();\\n    },\\n    contains: function (token) {\\n      return this.el.className.indexOf(token) != -1;\\n    },\\n    item: function (index) {\\n      return this[index] || null;\\n    },\\n    remove: function (token) {\\n      if (!this.contains(token)) return;\\n      for (var i = 0; i < this.length; i++) {\\n        if (this[i] == token) break;\\n      }\\n      splice.call(this, i, 1);\\n      this.el.className = this.toString();\\n    },\\n    toString: function () {\\n      return join.call(this, ' ');\\n    },\\n    toggle: function (token) {\\n      if (!this.contains(token)) {\\n        this.add(token);\\n      } else {\\n        this.remove(token);\\n      }\\n\\n      return this.contains(token);\\n    }\\n  };\\n\\n  window.DOMTokenList = DOMTokenList;\\n\\n  function defineElementGetter(obj, prop, getter) {\\n    if (Object.defineProperty) {\\n      Object.defineProperty(obj, prop, {\\n        get: getter\\n      });\\n    } else {\\n      obj.__defineGetter__(prop, getter);\\n    }\\n  }\\n\\n  defineElementGetter(HTMLElement.prototype, 'classList', function () {\\n    return new DOMTokenList(this);\\n  });\\n})();\\n\",\"export const Calc=(function () {\\n  var lastTime = 0;\\n  var vendors = ['webkit', 'moz'];\\n  for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\\n    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\\n      window[vendors[x] + 'CancelRequestAnimationFrame'];\\n  }\\n\\n  if (!window.requestAnimationFrame) {\\n    window.requestAnimationFrame = function (callback) {\\n      var currTime = new Date().getTime();\\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\\n      var id = window.setTimeout(function () {\\n        callback(currTime + timeToCall);\\n      },\\n      timeToCall);\\n      lastTime = currTime + timeToCall;\\n      return id;\\n    };\\n  }\\n\\n  if (!window.cancelAnimationFrame) {\\n    window.cancelAnimationFrame = function (id) {\\n      clearTimeout(id);\\n    };\\n  }\\n}());\\n\",\"function Tile(position, value) {\\n  this.x                = position.x;\\n  this.y                = position.y;\\n  this.value            = value || 2;\\n\\n  this.previousPosition = null;\\n  this.mergedFrom       = null; // Tracks tiles that merged together\\n}\\n\\nTile.prototype.savePosition = function () {\\n  this.previousPosition = { x: this.x, y: this.y };\\n};\\n\\nTile.prototype.updatePosition = function (position) {\\n  this.x = position.x;\\n  this.y = position.y;\\n};\\n\\nTile.prototype.serialize = function () {\\n  return {\\n    position: {\\n      x: this.x,\\n      y: this.y\\n    },\\n    value: this.value\\n  };\\n};\\nexport default Tile;\",\"import Tile from './tile';\\nfunction Grid(size, previousState) {\\n  this.size = size;\\n  this.cells = previousState ? this.fromState(previousState) : this.empty();\\n}\\n\\n// Build a grid of the specified size\\nGrid.prototype.empty = function () {\\n  var cells = [];\\n\\n  for (var x = 0; x < this.size; x++) {\\n    var row = cells[x] = [];\\n\\n    for (var y = 0; y < this.size; y++) {\\n      row.push(null);\\n    }\\n  }\\n\\n  return cells;\\n};\\n\\nGrid.prototype.fromState = function (state) {\\n  var cells = [];\\n\\n  for (var x = 0; x < this.size; x++) {\\n    var row = cells[x] = [];\\n\\n    for (var y = 0; y < this.size; y++) {\\n      var tile = state[x][y];\\n      row.push(tile ? new Tile(tile.position, tile.value) : null);\\n    }\\n  }\\n\\n  return cells;\\n};\\n\\n// Find the first available random position\\nGrid.prototype.randomAvailableCell = function () {\\n  var cells = this.availableCells();\\n\\n  if (cells.length) {\\n    return cells[Math.floor(Math.random() * cells.length)];\\n  }\\n};\\n\\nGrid.prototype.availableCells = function () {\\n  var cells = [];\\n\\n  this.eachCell(function (x, y, tile) {\\n    if (!tile) {\\n      cells.push({ x: x, y: y });\\n    }\\n  });\\n\\n  return cells;\\n};\\n\\n// Call callback for every cell\\nGrid.prototype.eachCell = function (callback) {\\n  for (var x = 0; x < this.size; x++) {\\n    for (var y = 0; y < this.size; y++) {\\n      callback(x, y, this.cells[x][y]);\\n    }\\n  }\\n};\\n\\n// Check if there are any cells available\\nGrid.prototype.cellsAvailable = function () {\\n  return !!this.availableCells().length;\\n};\\n\\n// Check if the specified cell is taken\\nGrid.prototype.cellAvailable = function (cell) {\\n  return !this.cellOccupied(cell);\\n};\\n\\nGrid.prototype.cellOccupied = function (cell) {\\n  return !!this.cellContent(cell);\\n};\\n\\nGrid.prototype.cellContent = function (cell) {\\n  if (this.withinBounds(cell)) {\\n    return this.cells[cell.x][cell.y];\\n  } else {\\n    return null;\\n  }\\n};\\n\\n// Inserts a tile at its position\\nGrid.prototype.insertTile = function (tile) {\\n  this.cells[tile.x][tile.y] = tile;\\n};\\n\\nGrid.prototype.removeTile = function (tile) {\\n  this.cells[tile.x][tile.y] = null;\\n};\\n\\nGrid.prototype.withinBounds = function (position) {\\n  return position.x >= 0 && position.x < this.size &&\\n         position.y >= 0 && position.y < this.size;\\n};\\n\\nGrid.prototype.serialize = function () {\\n  var cellState = [];\\n\\n  for (var x = 0; x < this.size; x++) {\\n    var row = cellState[x] = [];\\n\\n    for (var y = 0; y < this.size; y++) {\\n      row.push(this.cells[x][y] ? this.cells[x][y].serialize() : null);\\n    }\\n  }\\n\\n  return {\\n    size: this.size,\\n    cells: cellState\\n  };\\n};\\nexport default Grid;\",\"window.fakeStorage = {\\n  _data: {},\\n\\n  setItem: function (id, val) {\\n    return this._data[id] = String(val);\\n  },\\n\\n  getItem: function (id) {\\n    return this._data.hasOwnProperty(id) ? this._data[id] : undefined;\\n  },\\n\\n  removeItem: function (id) {\\n    return delete this._data[id];\\n  },\\n\\n  clear: function () {\\n    return this._data = {};\\n  }\\n};\\n\\nfunction LocalStorageManager() {\\n  this.bestScoreKey     = \\\"bestScore\\\";\\n  this.gameStateKey     = \\\"gameState\\\";\\n\\n  var supported = this.localStorageSupported();\\n  this.storage = supported ? window.localStorage : window.fakeStorage;\\n}\\n\\nLocalStorageManager.prototype.localStorageSupported = function () {\\n  var testKey = \\\"test\\\";\\n\\n  try {\\n    var storage = window.localStorage;\\n    storage.setItem(testKey, \\\"1\\\");\\n    storage.removeItem(testKey);\\n    return true;\\n  } catch (error) {\\n    return false;\\n  }\\n};\\n\\n// Best score getters/setters\\nLocalStorageManager.prototype.getBestScore = function () {\\n  return this.storage.getItem(this.bestScoreKey) || 0;\\n};\\n\\nLocalStorageManager.prototype.setBestScore = function (score) {\\n  this.storage.setItem(this.bestScoreKey, score);\\n};\\n\\n// Game state getters/setters and clearing\\nLocalStorageManager.prototype.getGameState = function () {\\n  var stateJSON = this.storage.getItem(this.gameStateKey);\\n  return stateJSON ? JSON.parse(stateJSON) : null;\\n};\\n\\nLocalStorageManager.prototype.setGameState = function (gameState) {\\n  this.storage.setItem(this.gameStateKey, JSON.stringify(gameState));\\n};\\n\\nLocalStorageManager.prototype.clearGameState = function () {\\n  this.storage.removeItem(this.gameStateKey);\\n};\\nexport default LocalStorageManager;\",\"import Grid from './grid';\\nimport Tile from './tile';\\nfunction GameManager(size, InputManager, Actuator, StorageManager) {\\n  this.size           = size; // Size of the grid\\n  this.inputManager   = new InputManager;\\n  this.storageManager = new StorageManager;\\n  this.actuator       = new Actuator;\\n\\n  this.startTiles     = 2;\\n\\n  this.inputManager.on(\\\"move\\\", this.move.bind(this));\\n  this.inputManager.on(\\\"restart\\\", this.restart.bind(this));\\n  this.inputManager.on(\\\"keepPlaying\\\", this.keepPlaying.bind(this));\\n\\n  this.setup();\\n}\\n\\n// Restart the game\\nGameManager.prototype.restart = function () {\\n  this.storageManager.clearGameState();\\n  this.actuator.continueGame(); // Clear the game won/lost message\\n  this.setup();\\n};\\n\\n// Keep playing after winning (allows going over 2048)\\nGameManager.prototype.keepPlaying = function () {\\n  this.keepPlaying = true;\\n  this.actuator.continueGame(); // Clear the game won/lost message\\n};\\n\\n// Return true if the game is lost, or has won and the user hasn't kept playing\\nGameManager.prototype.isGameTerminated = function () {\\n  return this.over || (this.won && !this.keepPlaying);\\n};\\n\\n// Set up the game\\nGameManager.prototype.setup = function () {\\n  var previousState = this.storageManager.getGameState();\\n\\n  // Reload the game from a previous game if present\\n  if (previousState) {\\n    this.grid        = new Grid(previousState.grid.size,\\n                                previousState.grid.cells); // Reload grid\\n    this.score       = previousState.score;\\n    this.over        = previousState.over;\\n    this.won         = previousState.won;\\n    this.keepPlaying = previousState.keepPlaying;\\n  } else {\\n    this.grid        = new Grid(this.size);\\n    this.score       = 0;\\n    this.over        = false;\\n    this.won         = false;\\n    this.keepPlaying = false;\\n\\n    // Add the initial tiles\\n    this.addStartTiles();\\n  }\\n\\n  // Update the actuator\\n  this.actuate();\\n};\\n\\n// Set up the initial tiles to start the game with\\nGameManager.prototype.addStartTiles = function () {\\n  for (var i = 0; i < this.startTiles; i++) {\\n    this.addRandomTile();\\n  }\\n};\\n\\n// Adds a tile in a random position\\nGameManager.prototype.addRandomTile = function () {\\n  if (this.grid.cellsAvailable()) {\\n    var value = Math.random() < 0.9 ? 2 : 4;\\n    var tile = new Tile(this.grid.randomAvailableCell(), value);\\n\\n    this.grid.insertTile(tile);\\n  }\\n};\\n\\n// Sends the updated grid to the actuator\\nGameManager.prototype.actuate = function () {\\n  if (this.storageManager.getBestScore() < this.score) {\\n    this.storageManager.setBestScore(this.score);\\n  }\\n\\n  // Clear the state when the game is over (game over only, not win)\\n  if (this.over) {\\n    this.storageManager.clearGameState();\\n  } else {\\n    this.storageManager.setGameState(this.serialize());\\n  }\\n\\n  this.actuator.actuate(this.grid, {\\n    score:      this.score,\\n    over:       this.over,\\n    won:        this.won,\\n    bestScore:  this.storageManager.getBestScore(),\\n    terminated: this.isGameTerminated()\\n  });\\n\\n};\\n\\n// Represent the current game as an object\\nGameManager.prototype.serialize = function () {\\n  return {\\n    grid:        this.grid.serialize(),\\n    score:       this.score,\\n    over:        this.over,\\n    won:         this.won,\\n    keepPlaying: this.keepPlaying\\n  };\\n};\\n\\n// Save all tile positions and remove merger info\\nGameManager.prototype.prepareTiles = function () {\\n  this.grid.eachCell(function (x, y, tile) {\\n    if (tile) {\\n      tile.mergedFrom = null;\\n      tile.savePosition();\\n    }\\n  });\\n};\\n\\n// Move a tile and its representation\\nGameManager.prototype.moveTile = function (tile, cell) {\\n  this.grid.cells[tile.x][tile.y] = null;\\n  this.grid.cells[cell.x][cell.y] = tile;\\n  tile.updatePosition(cell);\\n};\\n\\n// Move tiles on the grid in the specified direction\\nGameManager.prototype.move = function (direction) {\\n  // 0: up, 1: right, 2: down, 3: left\\n  var self = this;\\n\\n  if (this.isGameTerminated()) return; // Don't do anything if the game's over\\n\\n  var cell, tile;\\n\\n  var vector     = this.getVector(direction);\\n  var traversals = this.buildTraversals(vector);\\n  var moved      = false;\\n\\n  // Save the current tile positions and remove merger information\\n  this.prepareTiles();\\n\\n  // Traverse the grid in the right direction and move tiles\\n  traversals.x.forEach(function (x) {\\n    traversals.y.forEach(function (y) {\\n      cell = { x: x, y: y };\\n      tile = self.grid.cellContent(cell);\\n\\n      if (tile) {\\n        var positions = self.findFarthestPosition(cell, vector);\\n        var next      = self.grid.cellContent(positions.next);\\n\\n        // Only one merger per row traversal?\\n        if (next && next.value === tile.value && !next.mergedFrom) {\\n          var merged = new Tile(positions.next, tile.value * 2);\\n          merged.mergedFrom = [tile, next];\\n\\n          self.grid.insertTile(merged);\\n          self.grid.removeTile(tile);\\n\\n          // Converge the two tiles' positions\\n          tile.updatePosition(positions.next);\\n\\n          // Update the score\\n          self.score += merged.value;\\n\\n          // The mighty 2048 tile\\n          if (merged.value === 2048) self.won = true;\\n        } else {\\n          self.moveTile(tile, positions.farthest);\\n        }\\n\\n        if (!self.positionsEqual(cell, tile)) {\\n          moved = true; // The tile moved from its original cell!\\n        }\\n      }\\n    });\\n  });\\n\\n  if (moved) {\\n    this.addRandomTile();\\n\\n    if (!this.movesAvailable()) {\\n      this.over = true; // Game over!\\n    }\\n\\n    this.actuate();\\n  }\\n};\\n\\n// Get the vector representing the chosen direction\\nGameManager.prototype.getVector = function (direction) {\\n  // Vectors representing tile movement\\n  var map = {\\n    0: { x: 0,  y: -1 }, // Up\\n    1: { x: 1,  y: 0 },  // Right\\n    2: { x: 0,  y: 1 },  // Down\\n    3: { x: -1, y: 0 }   // Left\\n  };\\n\\n  return map[direction];\\n};\\n\\n// Build a list of positions to traverse in the right order\\nGameManager.prototype.buildTraversals = function (vector) {\\n  var traversals = { x: [], y: [] };\\n\\n  for (var pos = 0; pos < this.size; pos++) {\\n    traversals.x.push(pos);\\n    traversals.y.push(pos);\\n  }\\n\\n  // Always traverse from the farthest cell in the chosen direction\\n  if (vector.x === 1) traversals.x = traversals.x.reverse();\\n  if (vector.y === 1) traversals.y = traversals.y.reverse();\\n\\n  return traversals;\\n};\\n\\nGameManager.prototype.findFarthestPosition = function (cell, vector) {\\n  var previous;\\n\\n  // Progress towards the vector direction until an obstacle is found\\n  do {\\n    previous = cell;\\n    cell     = { x: previous.x + vector.x, y: previous.y + vector.y };\\n  } while (this.grid.withinBounds(cell) &&\\n           this.grid.cellAvailable(cell));\\n\\n  return {\\n    farthest: previous,\\n    next: cell // Used to check if a merge is required\\n  };\\n};\\n\\nGameManager.prototype.movesAvailable = function () {\\n  return this.grid.cellsAvailable() || this.tileMatchesAvailable();\\n};\\n\\n// Check for available matches between tiles (more expensive check)\\nGameManager.prototype.tileMatchesAvailable = function () {\\n  var self = this;\\n\\n  var tile;\\n\\n  for (var x = 0; x < this.size; x++) {\\n    for (var y = 0; y < this.size; y++) {\\n      tile = this.grid.cellContent({ x: x, y: y });\\n\\n      if (tile) {\\n        for (var direction = 0; direction < 4; direction++) {\\n          var vector = self.getVector(direction);\\n          var cell   = { x: x + vector.x, y: y + vector.y };\\n\\n          var other  = self.grid.cellContent(cell);\\n\\n          if (other && other.value === tile.value) {\\n            return true; // These two tiles can be merged\\n          }\\n        }\\n      }\\n    }\\n  }\\n\\n  return false;\\n};\\n\\nGameManager.prototype.positionsEqual = function (first, second) {\\n  return first.x === second.x && first.y === second.y;\\n};\\nexport default GameManager;\",\"function KeyboardInputManager() {\\n  this.events = {};\\n\\n  if (window.navigator.msPointerEnabled) {\\n    //Internet Explorer 10 style\\n    this.eventTouchstart    = \\\"MSPointerDown\\\";\\n    this.eventTouchmove     = \\\"MSPointerMove\\\";\\n    this.eventTouchend      = \\\"MSPointerUp\\\";\\n  } else {\\n    this.eventTouchstart    = \\\"touchstart\\\";\\n    this.eventTouchmove     = \\\"touchmove\\\";\\n    this.eventTouchend      = \\\"touchend\\\";\\n  }\\n\\n  this.listen();\\n}\\n\\nKeyboardInputManager.prototype.on = function (event, callback) {\\n  if (!this.events[event]) {\\n    this.events[event] = [];\\n  }\\n  this.events[event].push(callback);\\n};\\n\\nKeyboardInputManager.prototype.emit = function (event, data) {\\n  var callbacks = this.events[event];\\n  if (callbacks) {\\n    callbacks.forEach(function (callback) {\\n      callback(data);\\n    });\\n  }\\n};\\n\\nKeyboardInputManager.prototype.listen = function () {\\n  var self = this;\\n\\n  var map = {\\n    38: 0, // Up\\n    39: 1, // Right\\n    40: 2, // Down\\n    37: 3, // Left\\n    75: 0, // Vim up\\n    76: 1, // Vim right\\n    74: 2, // Vim down\\n    72: 3, // Vim left\\n    87: 0, // W\\n    68: 1, // D\\n    83: 2, // S\\n    65: 3  // A\\n  };\\n\\n  // Respond to direction keys\\n  document.addEventListener(\\\"keydown\\\", function (event) {\\n    var modifiers = event.altKey || event.ctrlKey || event.metaKey ||\\n                    event.shiftKey;\\n    var mapped    = map[event.which];\\n\\n    if (!modifiers) {\\n      if (mapped !== undefined) {\\n        event.preventDefault();\\n        self.emit(\\\"move\\\", mapped);\\n      }\\n    }\\n\\n    // R key restarts the game\\n    if (!modifiers && event.which === 82) {\\n      self.restart.call(self, event);\\n    }\\n  });\\n\\n  // Respond to button presses\\n  this.bindButtonPress(\\\".retry-button\\\", this.restart);\\n  this.bindButtonPress(\\\".restart-button\\\", this.restart);\\n  this.bindButtonPress(\\\".keep-playing-button\\\", this.keepPlaying);\\n\\n  // Respond to swipe events\\n  var touchStartClientX, touchStartClientY;\\n  var gameContainer = document.getElementsByClassName(\\\"game-container\\\")[0];\\n\\n  gameContainer.addEventListener(this.eventTouchstart, function (event) {\\n    if ((!window.navigator.msPointerEnabled && event.touches.length > 1) ||\\n        event.targetTouches.length > 1) {\\n      return; // Ignore if touching with more than 1 finger\\n    }\\n\\n    if (window.navigator.msPointerEnabled) {\\n      touchStartClientX = event.pageX;\\n      touchStartClientY = event.pageY;\\n    } else {\\n      touchStartClientX = event.touches[0].clientX;\\n      touchStartClientY = event.touches[0].clientY;\\n    }\\n\\n    event.preventDefault();\\n  });\\n\\n  gameContainer.addEventListener(this.eventTouchmove, function (event) {\\n    event.preventDefault();\\n  });\\n\\n  gameContainer.addEventListener(this.eventTouchend, function (event) {\\n    if ((!window.navigator.msPointerEnabled && event.touches.length > 0) ||\\n        event.targetTouches.length > 0) {\\n      return; // Ignore if still touching with one or more fingers\\n    }\\n\\n    var touchEndClientX, touchEndClientY;\\n\\n    if (window.navigator.msPointerEnabled) {\\n      touchEndClientX = event.pageX;\\n      touchEndClientY = event.pageY;\\n    } else {\\n      touchEndClientX = event.changedTouches[0].clientX;\\n      touchEndClientY = event.changedTouches[0].clientY;\\n    }\\n\\n    var dx = touchEndClientX - touchStartClientX;\\n    var absDx = Math.abs(dx);\\n\\n    var dy = touchEndClientY - touchStartClientY;\\n    var absDy = Math.abs(dy);\\n\\n    if (Math.max(absDx, absDy) > 10) {\\n      // (right : left) : (down : up)\\n      self.emit(\\\"move\\\", absDx > absDy ? (dx > 0 ? 1 : 3) : (dy > 0 ? 2 : 0));\\n    }\\n  });\\n};\\n\\nKeyboardInputManager.prototype.restart = function (event) {\\n  event.preventDefault();\\n  this.emit(\\\"restart\\\");\\n};\\n\\nKeyboardInputManager.prototype.keepPlaying = function (event) {\\n  event.preventDefault();\\n  this.emit(\\\"keepPlaying\\\");\\n};\\n\\nKeyboardInputManager.prototype.bindButtonPress = function (selector, fn) {\\n  var button = document.querySelector(selector);\\n  button.addEventListener(\\\"click\\\", fn.bind(this));\\n  button.addEventListener(this.eventTouchend, fn.bind(this));\\n};\\nexport default KeyboardInputManager;\",\"function HTMLActuator() {\\n  this.tileContainer    = document.querySelector(\\\".tile-container\\\");\\n  this.scoreContainer   = document.querySelector(\\\".score-container\\\");\\n  this.bestContainer    = document.querySelector(\\\".best-container\\\");\\n  this.messageContainer = document.querySelector(\\\".game-message\\\");\\n\\n  this.score = 0;\\n}\\n\\nHTMLActuator.prototype.actuate = function (grid, metadata) {\\n  var self = this;\\n\\n  window.requestAnimationFrame(function () {\\n    self.clearContainer(self.tileContainer);\\n\\n    grid.cells.forEach(function (column) {\\n      column.forEach(function (cell) {\\n        if (cell) {\\n          self.addTile(cell);\\n        }\\n      });\\n    });\\n\\n    self.updateScore(metadata.score);\\n    self.updateBestScore(metadata.bestScore);\\n\\n    if (metadata.terminated) {\\n      if (metadata.over) {\\n        self.message(false); // You lose\\n      } else if (metadata.won) {\\n        self.message(true); // You win!\\n      }\\n    }\\n\\n  });\\n};\\n\\n// Continues the game (both restart and keep playing)\\nHTMLActuator.prototype.continueGame = function () {\\n  this.clearMessage();\\n};\\n\\nHTMLActuator.prototype.clearContainer = function (container) {\\n  while (container.firstChild) {\\n    container.removeChild(container.firstChild);\\n  }\\n};\\n\\nHTMLActuator.prototype.addTile = function (tile) {\\n  var self = this;\\n\\n  var wrapper   = document.createElement(\\\"div\\\");\\n  var inner     = document.createElement(\\\"div\\\");\\n  var position  = tile.previousPosition || { x: tile.x, y: tile.y };\\n  var positionClass = this.positionClass(position);\\n\\n  // We can't use classlist because it somehow glitches when replacing classes\\n  var classes = [\\\"tile\\\", \\\"tile-\\\" + tile.value, positionClass];\\n\\n  if (tile.value > 2048) classes.push(\\\"tile-super\\\");\\n\\n  this.applyClasses(wrapper, classes);\\n\\n  inner.classList.add(\\\"tile-inner\\\");\\n  inner.textContent = tile.value;\\n\\n  if (tile.previousPosition) {\\n    // Make sure that the tile gets rendered in the previous position first\\n    window.requestAnimationFrame(function () {\\n      classes[2] = self.positionClass({ x: tile.x, y: tile.y });\\n      self.applyClasses(wrapper, classes); // Update the position\\n    });\\n  } else if (tile.mergedFrom) {\\n    classes.push(\\\"tile-merged\\\");\\n    this.applyClasses(wrapper, classes);\\n\\n    // Render the tiles that merged\\n    tile.mergedFrom.forEach(function (merged) {\\n      self.addTile(merged);\\n    });\\n  } else {\\n    classes.push(\\\"tile-new\\\");\\n    this.applyClasses(wrapper, classes);\\n  }\\n\\n  // Add the inner part of the tile to the wrapper\\n  wrapper.appendChild(inner);\\n\\n  // Put the tile on the board\\n  this.tileContainer.appendChild(wrapper);\\n};\\n\\nHTMLActuator.prototype.applyClasses = function (element, classes) {\\n  element.setAttribute(\\\"class\\\", classes.join(\\\" \\\"));\\n};\\n\\nHTMLActuator.prototype.normalizePosition = function (position) {\\n  return { x: position.x + 1, y: position.y + 1 };\\n};\\n\\nHTMLActuator.prototype.positionClass = function (position) {\\n  position = this.normalizePosition(position);\\n  return \\\"tile-position-\\\" + position.x + \\\"-\\\" + position.y;\\n};\\n\\nHTMLActuator.prototype.updateScore = function (score) {\\n  this.clearContainer(this.scoreContainer);\\n\\n  var difference = score - this.score;\\n  this.score = score;\\n\\n  this.scoreContainer.textContent = this.score;\\n\\n  if (difference > 0) {\\n    var addition = document.createElement(\\\"div\\\");\\n    addition.classList.add(\\\"score-addition\\\");\\n    addition.textContent = \\\"+\\\" + difference;\\n\\n    this.scoreContainer.appendChild(addition);\\n  }\\n};\\n\\nHTMLActuator.prototype.updateBestScore = function (bestScore) {\\n  this.bestContainer.textContent = bestScore;\\n};\\n\\nHTMLActuator.prototype.message = function (won) {\\n  var type    = won ? \\\"game-won\\\" : \\\"game-over\\\";\\n  var message = won ? \\\"You win!\\\" : \\\"Game over!\\\";\\n\\n  this.messageContainer.classList.add(type);\\n  this.messageContainer.getElementsByTagName(\\\"p\\\")[0].textContent = message;\\n};\\n\\nHTMLActuator.prototype.clearMessage = function () {\\n  // IE only takes one value to remove at a time.\\n  this.messageContainer.classList.remove(\\\"game-won\\\");\\n  this.messageContainer.classList.remove(\\\"game-over\\\");\\n};\\nexport default HTMLActuator;\",\"// Wait till the browser is ready to render the game (avoids glitches)\\nimport  GameManager from './game_manager';\\nimport  KeyboardInputManager  from './keyboard_input_manager';\\nimport HTMLActuator from './html_actuator';\\nimport LocalStorageManager from './local_storage_manager';\\nexport const Show = window.requestAnimationFrame(function () {\\n  new GameManager(4, KeyboardInputManager, HTMLActuator, LocalStorageManager);\\n});\\n\"]}","code":"!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"/\",i(i.s=1)}([function(t,e,i){},function(t,e,i){\"use strict\";i.r(e);i(0),Function.prototype.bind=Function.prototype.bind||function(t){var e=this;return function(i){i instanceof Array||(i=[i]),e.apply(t,i)}},function(){if(!(void 0===window.Element||\"classList\"in document.documentElement)){var t=Array.prototype,e=t.push,i=t.splice,n=t.join;o.prototype={add:function(t){this.contains(t)||(e.call(this,t),this.el.className=this.toString())},contains:function(t){return-1!=this.el.className.indexOf(t)},item:function(t){return this[t]||null},remove:function(t){if(this.contains(t)){for(var e=0;e<this.length&&this[e]!=t;e++);i.call(this,e,1),this.el.className=this.toString()}},toString:function(){return n.call(this,\" \")},toggle:function(t){return this.contains(t)?this.remove(t):this.add(t),this.contains(t)}},window.DOMTokenList=o,function(t,e,i){Object.defineProperty?Object.defineProperty(t,e,{get:i}):t.__defineGetter__(e,i)}(HTMLElement.prototype,\"classList\",function(){return new o(this)})}function o(t){this.el=t;for(var i=t.className.replace(/^\\s+|\\s+$/g,\"\").split(/\\s+/),n=0;n<i.length;n++)e.call(this,i[n])}}(),function(){for(var t=0,e=[\"webkit\",\"moz\"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+\"RequestAnimationFrame\"],window.cancelAnimationFrame=window[e[i]+\"CancelAnimationFrame\"]||window[e[i]+\"CancelRequestAnimationFrame\"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),o=window.setTimeout(function(){e(i+n)},n);return t=i+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();function n(t,e){this.x=t.x,this.y=t.y,this.value=e||2,this.previousPosition=null,this.mergedFrom=null}n.prototype.savePosition=function(){this.previousPosition={x:this.x,y:this.y}},n.prototype.updatePosition=function(t){this.x=t.x,this.y=t.y},n.prototype.serialize=function(){return{position:{x:this.x,y:this.y},value:this.value}};var o=n;function r(t,e){this.size=t,this.cells=e?this.fromState(e):this.empty()}r.prototype.empty=function(){for(var t=[],e=0;e<this.size;e++)for(var i=t[e]=[],n=0;n<this.size;n++)i.push(null);return t},r.prototype.fromState=function(t){for(var e=[],i=0;i<this.size;i++)for(var n=e[i]=[],r=0;r<this.size;r++){var s=t[i][r];n.push(s?new o(s.position,s.value):null)}return e},r.prototype.randomAvailableCell=function(){var t=this.availableCells();if(t.length)return t[Math.floor(Math.random()*t.length)]},r.prototype.availableCells=function(){var t=[];return this.eachCell(function(e,i,n){n||t.push({x:e,y:i})}),t},r.prototype.eachCell=function(t){for(var e=0;e<this.size;e++)for(var i=0;i<this.size;i++)t(e,i,this.cells[e][i])},r.prototype.cellsAvailable=function(){return!!this.availableCells().length},r.prototype.cellAvailable=function(t){return!this.cellOccupied(t)},r.prototype.cellOccupied=function(t){return!!this.cellContent(t)},r.prototype.cellContent=function(t){return this.withinBounds(t)?this.cells[t.x][t.y]:null},r.prototype.insertTile=function(t){this.cells[t.x][t.y]=t},r.prototype.removeTile=function(t){this.cells[t.x][t.y]=null},r.prototype.withinBounds=function(t){return t.x>=0&&t.x<this.size&&t.y>=0&&t.y<this.size},r.prototype.serialize=function(){for(var t=[],e=0;e<this.size;e++)for(var i=t[e]=[],n=0;n<this.size;n++)i.push(this.cells[e][n]?this.cells[e][n].serialize():null);return{size:this.size,cells:t}};var s=r;function a(){this.bestScoreKey=\"bestScore\",this.gameStateKey=\"gameState\";var t=this.localStorageSupported();this.storage=t?window.localStorage:window.fakeStorage}window.fakeStorage={_data:{},setItem:function(t,e){return this._data[t]=String(e)},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:void 0},removeItem:function(t){return delete this._data[t]},clear:function(){return this._data={}}},a.prototype.localStorageSupported=function(){try{var t=window.localStorage;return t.setItem(\"test\",\"1\"),t.removeItem(\"test\"),!0}catch(t){return!1}},a.prototype.getBestScore=function(){return this.storage.getItem(this.bestScoreKey)||0},a.prototype.setBestScore=function(t){this.storage.setItem(this.bestScoreKey,t)},a.prototype.getGameState=function(){var t=this.storage.getItem(this.gameStateKey);return t?JSON.parse(t):null},a.prototype.setGameState=function(t){this.storage.setItem(this.gameStateKey,JSON.stringify(t))},a.prototype.clearGameState=function(){this.storage.removeItem(this.gameStateKey)};var l=a;function c(t,e,i,n){this.size=t,this.inputManager=new e,this.storageManager=new n,this.actuator=new i,this.startTiles=2,this.inputManager.on(\"move\",this.move.bind(this)),this.inputManager.on(\"restart\",this.restart.bind(this)),this.inputManager.on(\"keepPlaying\",this.keepPlaying.bind(this)),this.setup()}c.prototype.restart=function(){this.storageManager.clearGameState(),this.actuator.continueGame(),this.setup()},c.prototype.keepPlaying=function(){this.keepPlaying=!0,this.actuator.continueGame()},c.prototype.isGameTerminated=function(){return this.over||this.won&&!this.keepPlaying},c.prototype.setup=function(){var t=this.storageManager.getGameState();t?(this.grid=new s(t.grid.size,t.grid.cells),this.score=t.score,this.over=t.over,this.won=t.won,this.keepPlaying=t.keepPlaying):(this.grid=new s(this.size),this.score=0,this.over=!1,this.won=!1,this.keepPlaying=!1,this.addStartTiles()),this.actuate()},c.prototype.addStartTiles=function(){for(var t=0;t<this.startTiles;t++)this.addRandomTile()},c.prototype.addRandomTile=function(){if(this.grid.cellsAvailable()){var t=Math.random()<.9?2:4,e=new o(this.grid.randomAvailableCell(),t);this.grid.insertTile(e)}},c.prototype.actuate=function(){this.storageManager.getBestScore()<this.score&&this.storageManager.setBestScore(this.score),this.over?this.storageManager.clearGameState():this.storageManager.setGameState(this.serialize()),this.actuator.actuate(this.grid,{score:this.score,over:this.over,won:this.won,bestScore:this.storageManager.getBestScore(),terminated:this.isGameTerminated()})},c.prototype.serialize=function(){return{grid:this.grid.serialize(),score:this.score,over:this.over,won:this.won,keepPlaying:this.keepPlaying}},c.prototype.prepareTiles=function(){this.grid.eachCell(function(t,e,i){i&&(i.mergedFrom=null,i.savePosition())})},c.prototype.moveTile=function(t,e){this.grid.cells[t.x][t.y]=null,this.grid.cells[e.x][e.y]=t,t.updatePosition(e)},c.prototype.move=function(t){var e=this;if(!this.isGameTerminated()){var i,n,r=this.getVector(t),s=this.buildTraversals(r),a=!1;this.prepareTiles(),s.x.forEach(function(t){s.y.forEach(function(s){if(i={x:t,y:s},n=e.grid.cellContent(i)){var l=e.findFarthestPosition(i,r),c=e.grid.cellContent(l.next);if(c&&c.value===n.value&&!c.mergedFrom){var u=new o(l.next,2*n.value);u.mergedFrom=[n,c],e.grid.insertTile(u),e.grid.removeTile(n),n.updatePosition(l.next),e.score+=u.value,2048===u.value&&(e.won=!0)}else e.moveTile(n,l.farthest);e.positionsEqual(i,n)||(a=!0)}})}),a&&(this.addRandomTile(),this.movesAvailable()||(this.over=!0),this.actuate())}},c.prototype.getVector=function(t){return{0:{x:0,y:-1},1:{x:1,y:0},2:{x:0,y:1},3:{x:-1,y:0}}[t]},c.prototype.buildTraversals=function(t){for(var e={x:[],y:[]},i=0;i<this.size;i++)e.x.push(i),e.y.push(i);return 1===t.x&&(e.x=e.x.reverse()),1===t.y&&(e.y=e.y.reverse()),e},c.prototype.findFarthestPosition=function(t,e){var i;do{t={x:(i=t).x+e.x,y:i.y+e.y}}while(this.grid.withinBounds(t)&&this.grid.cellAvailable(t));return{farthest:i,next:t}},c.prototype.movesAvailable=function(){return this.grid.cellsAvailable()||this.tileMatchesAvailable()},c.prototype.tileMatchesAvailable=function(){for(var t,e=0;e<this.size;e++)for(var i=0;i<this.size;i++)if(t=this.grid.cellContent({x:e,y:i}))for(var n=0;n<4;n++){var o=this.getVector(n),r={x:e+o.x,y:i+o.y},s=this.grid.cellContent(r);if(s&&s.value===t.value)return!0}return!1},c.prototype.positionsEqual=function(t,e){return t.x===e.x&&t.y===e.y};var u=c;function h(){this.events={},window.navigator.msPointerEnabled?(this.eventTouchstart=\"MSPointerDown\",this.eventTouchmove=\"MSPointerMove\",this.eventTouchend=\"MSPointerUp\"):(this.eventTouchstart=\"touchstart\",this.eventTouchmove=\"touchmove\",this.eventTouchend=\"touchend\"),this.listen()}h.prototype.on=function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)},h.prototype.emit=function(t,e){var i=this.events[t];i&&i.forEach(function(t){t(e)})},h.prototype.listen=function(){var t,e,i=this,n={38:0,39:1,40:2,37:3,75:0,76:1,74:2,72:3,87:0,68:1,83:2,65:3};document.addEventListener(\"keydown\",function(t){var e=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey,o=n[t.which];e||void 0!==o&&(t.preventDefault(),i.emit(\"move\",o)),e||82!==t.which||i.restart.call(i,t)}),this.bindButtonPress(\".retry-button\",this.restart),this.bindButtonPress(\".restart-button\",this.restart),this.bindButtonPress(\".keep-playing-button\",this.keepPlaying);var o=document.getElementsByClassName(\"game-container\")[0];o.addEventListener(this.eventTouchstart,function(i){!window.navigator.msPointerEnabled&&i.touches.length>1||i.targetTouches.length>1||(window.navigator.msPointerEnabled?(t=i.pageX,e=i.pageY):(t=i.touches[0].clientX,e=i.touches[0].clientY),i.preventDefault())}),o.addEventListener(this.eventTouchmove,function(t){t.preventDefault()}),o.addEventListener(this.eventTouchend,function(n){if(!(!window.navigator.msPointerEnabled&&n.touches.length>0||n.targetTouches.length>0)){var o,r;window.navigator.msPointerEnabled?(o=n.pageX,r=n.pageY):(o=n.changedTouches[0].clientX,r=n.changedTouches[0].clientY);var s=o-t,a=Math.abs(s),l=r-e,c=Math.abs(l);Math.max(a,c)>10&&i.emit(\"move\",a>c?s>0?1:3:l>0?2:0)}})},h.prototype.restart=function(t){t.preventDefault(),this.emit(\"restart\")},h.prototype.keepPlaying=function(t){t.preventDefault(),this.emit(\"keepPlaying\")},h.prototype.bindButtonPress=function(t,e){var i=document.querySelector(t);i.addEventListener(\"click\",e.bind(this)),i.addEventListener(this.eventTouchend,e.bind(this))};var p=h;function d(){this.tileContainer=document.querySelector(\".tile-container\"),this.scoreContainer=document.querySelector(\".score-container\"),this.bestContainer=document.querySelector(\".best-container\"),this.messageContainer=document.querySelector(\".game-message\"),this.score=0}d.prototype.actuate=function(t,e){var i=this;window.requestAnimationFrame(function(){i.clearContainer(i.tileContainer),t.cells.forEach(function(t){t.forEach(function(t){t&&i.addTile(t)})}),i.updateScore(e.score),i.updateBestScore(e.bestScore),e.terminated&&(e.over?i.message(!1):e.won&&i.message(!0))})},d.prototype.continueGame=function(){this.clearMessage()},d.prototype.clearContainer=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},d.prototype.addTile=function(t){var e=this,i=document.createElement(\"div\"),n=document.createElement(\"div\"),o=t.previousPosition||{x:t.x,y:t.y},r=this.positionClass(o),s=[\"tile\",\"tile-\"+t.value,r];t.value>2048&&s.push(\"tile-super\"),this.applyClasses(i,s),n.classList.add(\"tile-inner\"),n.textContent=t.value,t.previousPosition?window.requestAnimationFrame(function(){s[2]=e.positionClass({x:t.x,y:t.y}),e.applyClasses(i,s)}):t.mergedFrom?(s.push(\"tile-merged\"),this.applyClasses(i,s),t.mergedFrom.forEach(function(t){e.addTile(t)})):(s.push(\"tile-new\"),this.applyClasses(i,s)),i.appendChild(n),this.tileContainer.appendChild(i)},d.prototype.applyClasses=function(t,e){t.setAttribute(\"class\",e.join(\" \"))},d.prototype.normalizePosition=function(t){return{x:t.x+1,y:t.y+1}},d.prototype.positionClass=function(t){return\"tile-position-\"+(t=this.normalizePosition(t)).x+\"-\"+t.y},d.prototype.updateScore=function(t){this.clearContainer(this.scoreContainer);var e=t-this.score;if(this.score=t,this.scoreContainer.textContent=this.score,e>0){var i=document.createElement(\"div\");i.classList.add(\"score-addition\"),i.textContent=\"+\"+e,this.scoreContainer.appendChild(i)}},d.prototype.updateBestScore=function(t){this.bestContainer.textContent=t},d.prototype.message=function(t){var e=t?\"game-won\":\"game-over\",i=t?\"You win!\":\"Game over!\";this.messageContainer.classList.add(e),this.messageContainer.getElementsByTagName(\"p\")[0].textContent=i},d.prototype.clearMessage=function(){this.messageContainer.classList.remove(\"game-won\"),this.messageContainer.classList.remove(\"game-over\")};var f=d;window.requestAnimationFrame(function(){new u(4,p,f,l)})}]);","extractedComments":[]}