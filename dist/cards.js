!function(a){function t(t){for(var e,n,i=t[0],r=t[1],o=0,s=[];o<i.length;o++)n=i[o],c[n]&&s.push(c[n][0]),c[n]=0;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(a[e]=r[e]);for(u&&u(t);s.length;)s.shift()()}var n={},l={2:0},c={2:0};function h(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,h),e.l=!0,e.exports}h.e=function(u){var t=[];l[u]?t.push(l[u]):0!==l[u]&&{5:1}[u]&&t.push(l[u]=new Promise(function(t,i){for(var e=u+".css",r=h.p+e,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var s=(l=n[o]).getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(s===e||s===r))return t()}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){var l;if((s=(l=a[o]).getAttribute("data-href"))===e||s===r)return t()}var c=document.createElement("link");c.rel="stylesheet",c.type="text/css",c.onload=t,c.onerror=function(t){var e=t&&t.target&&t.target.src||r,n=new Error("Loading CSS chunk "+u+" failed.\n("+e+")");n.request=e,i(n)},c.href=r,document.getElementsByTagName("head")[0].appendChild(c)}).then(function(){l[u]=0}));var e,n=c[u];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(t,e){n=c[u]=[t,e]});t.push(n[2]=i);var r,o=document.getElementsByTagName("head")[0],s=document.createElement("script");s.charset="utf-8",s.timeout=120,h.nc&&s.setAttribute("nonce",h.nc),s.src=h.p+""+({}[e=u]||e)+".js",r=function(t){s.onerror=s.onload=null,clearTimeout(a);var e=c[u];if(0!==e){if(e){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,r=new Error("Loading chunk "+u+" failed.\n("+n+": "+i+")");r.type=n,r.request=i,e[1](r)}c[u]=void 0}};var a=setTimeout(function(){r({type:"timeout",target:s})},12e4);s.onerror=s.onload=r,o.appendChild(s)}return Promise.all(t)},h.m=a,h.c=n,h.d=function(t,e,n){h.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},h.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},h.t=function(e,t){if(1&t&&(e=h(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(h.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)h.d(n,i,function(t){return e[t]}.bind(null,i));return n},h.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return h.d(e,"a",e),e},h.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},h.p="",h.oe=function(t){throw console.error(t),t};var e=window.webpackJsonp=window.webpackJsonp||[],i=e.push.bind(e);e.push=t,e=e.slice();for(var r=0;r<e.length;r++)t(e[r]);var u=i;h(h.s=21)}({0:function(t,e,i){var n,r,o,l={},c=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=n.apply(this,arguments)),r}),s=(o={},function(t,e){if("function"==typeof t)return t();if(void 0===o[t]){var n=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}o[t]=n}return o[t]}),u=null,h=0,a=[],p=i(1);function f(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=l[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(w(i.parts[o],e))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(w(i.parts[o],e));l[i.id]={id:i.id,refs:1,parts:s}}}}function d(t,e){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};i[s]?i[s].parts.push(a):n.push(i[s]={id:s,parts:[a]})}return n}function v(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=a[a.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),a.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=s(t.insertAt.before,n);n.insertBefore(e,r)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=a.indexOf(t);0<=e&&a.splice(e,1)}function y(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=function(){0;return i.nc}();n&&(t.attrs.nonce=n)}return g(e,t.attrs),v(t,e),e}function g(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function w(e,t){var n,i,r,o,s,a;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var l=h++;n=u||(u=y(t)),i=S.bind(null,n,l,!1),r=S.bind(null,n,l,!0)}else r=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(s=t,a=document.createElement("link"),void 0===s.attrs.type&&(s.attrs.type="text/css"),s.attrs.rel="stylesheet",g(a,s.attrs),v(s,a),i=function(t,e,n){var i=n.css,r=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||o)&&(i=p(i));r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([i],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n=a,t),function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),i=function(t,e){var n=e.css,i=e.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),function(){m(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}t.exports=function(t,s){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(s=s||{}).attrs="object"==typeof s.attrs?s.attrs:{},s.singleton||"boolean"==typeof s.singleton||(s.singleton=c()),s.insertInto||(s.insertInto="head"),s.insertAt||(s.insertAt="bottom");var a=d(t,s);return f(a,s),function(t){for(var e=[],n=0;n<a.length;n++){var i=a[n];(r=l[i.id]).refs--,e.push(r)}t&&f(d(t,s),s);for(n=0;n<e.length;n++){var r;if(0===(r=e[n]).refs){for(var o=0;o<r.parts.length;o++)r.parts[o]();delete l[r.id]}}}};var b,x=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function S(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=x(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}},1:function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,o=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(n=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},21:function(t,e,n){"use strict";n.r(e);n(6),Function.prototype.bind=Function.prototype.bind||function(e){var n=this;return function(t){t instanceof Array||(t=[t]),n.apply(e,t)}},function(){if(!(void 0===window.Element||"classList"in document.documentElement)){var t,e,n,i=Array.prototype,r=i.push,o=i.splice,s=i.join;a.prototype={add:function(t){this.contains(t)||(r.call(this,t),this.el.className=this.toString())},contains:function(t){return-1!=this.el.className.indexOf(t)},item:function(t){return this[t]||null},remove:function(t){if(this.contains(t)){for(var e=0;e<this.length&&this[e]!=t;e++);o.call(this,e,1),this.el.className=this.toString()}},toString:function(){return s.call(this," ")},toggle:function(t){return this.contains(t)?this.remove(t):this.add(t),this.contains(t)}},window.DOMTokenList=a,t=HTMLElement.prototype,e="classList",n=function(){return new a(this)},Object.defineProperty?Object.defineProperty(t,e,{get:n}):t.__defineGetter__(e,n)}function a(t){for(var e=(this.el=t).className.replace(/^\s+|\s+$/g,"").split(/\s+/),n=0;n<e.length;n++)r.call(this,e[n])}}(),function(){for(var r=0,t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-r)),i=window.setTimeout(function(){t(e+n)},n);return r=e+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();function i(t,e){this.x=t.x,this.y=t.y,this.value=e||2,this.previousPosition=null,this.mergedFrom=null}i.prototype.savePosition=function(){this.previousPosition={x:this.x,y:this.y}},i.prototype.updatePosition=function(t){this.x=t.x,this.y=t.y},i.prototype.serialize=function(){return{position:{x:this.x,y:this.y},value:this.value}};var u=i;function r(t,e){this.size=t,this.cells=e?this.fromState(e):this.empty()}r.prototype.empty=function(){for(var t=[],e=0;e<this.size;e++)for(var n=t[e]=[],i=0;i<this.size;i++)n.push(null);return t},r.prototype.fromState=function(t){for(var e=[],n=0;n<this.size;n++)for(var i=e[n]=[],r=0;r<this.size;r++){var o=t[n][r];i.push(o?new u(o.position,o.value):null)}return e},r.prototype.randomAvailableCell=function(){var t=this.availableCells();if(t.length)return t[Math.floor(Math.random()*t.length)]},r.prototype.availableCells=function(){var i=[];return this.eachCell(function(t,e,n){n||i.push({x:t,y:e})}),i},r.prototype.eachCell=function(t){for(var e=0;e<this.size;e++)for(var n=0;n<this.size;n++)t(e,n,this.cells[e][n])},r.prototype.cellsAvailable=function(){return!!this.availableCells().length},r.prototype.cellAvailable=function(t){return!this.cellOccupied(t)},r.prototype.cellOccupied=function(t){return!!this.cellContent(t)},r.prototype.cellContent=function(t){return this.withinBounds(t)?this.cells[t.x][t.y]:null},r.prototype.insertTile=function(t){this.cells[t.x][t.y]=t},r.prototype.removeTile=function(t){this.cells[t.x][t.y]=null},r.prototype.withinBounds=function(t){return 0<=t.x&&t.x<this.size&&0<=t.y&&t.y<this.size},r.prototype.serialize=function(){for(var t=[],e=0;e<this.size;e++)for(var n=t[e]=[],i=0;i<this.size;i++)n.push(this.cells[e][i]?this.cells[e][i].serialize():null);return{size:this.size,cells:t}};var o=r;function s(){this.bestScoreKey="bestScore",this.gameStateKey="gameState";var t=this.localStorageSupported();this.storage=t?window.localStorage:window.fakeStorage}window.fakeStorage={_data:{},setItem:function(t,e){return this._data[t]=String(e)},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:void 0},removeItem:function(t){return delete this._data[t]},clear:function(){return this._data={}}},s.prototype.localStorageSupported=function(){try{var t=window.localStorage;return t.setItem("test","1"),t.removeItem("test"),!0}catch(t){return!1}},s.prototype.getBestScore=function(){return this.storage.getItem(this.bestScoreKey)||0},s.prototype.setBestScore=function(t){this.storage.setItem(this.bestScoreKey,t)},s.prototype.getGameState=function(){var t=this.storage.getItem(this.gameStateKey);return t?JSON.parse(t):null},s.prototype.setGameState=function(t){this.storage.setItem(this.gameStateKey,JSON.stringify(t))},s.prototype.clearGameState=function(){this.storage.removeItem(this.gameStateKey)};var a=s;function l(t,e,n,i){this.size=t,this.inputManager=new e,this.storageManager=new i,this.actuator=new n,this.startTiles=2,this.inputManager.on("move",this.move.bind(this)),this.inputManager.on("restart",this.restart.bind(this)),this.inputManager.on("keepPlaying",this.keepPlaying.bind(this)),this.setup()}l.prototype.restart=function(){this.storageManager.clearGameState(),this.actuator.continueGame(),this.setup()},l.prototype.keepPlaying=function(){this.keepPlaying=!0,this.actuator.continueGame()},l.prototype.isGameTerminated=function(){return this.over||this.won&&!this.keepPlaying},l.prototype.setup=function(){var t=this.storageManager.getGameState();t?(this.grid=new o(t.grid.size,t.grid.cells),this.score=t.score,this.over=t.over,this.won=t.won,this.keepPlaying=t.keepPlaying):(this.grid=new o(this.size),this.score=0,this.over=!1,this.won=!1,this.keepPlaying=!1,this.addStartTiles()),this.actuate()},l.prototype.addStartTiles=function(){for(var t=0;t<this.startTiles;t++)this.addRandomTile()},l.prototype.addRandomTile=function(){if(this.grid.cellsAvailable()){var t=Math.random()<.9?2:4,e=new u(this.grid.randomAvailableCell(),t);this.grid.insertTile(e)}},l.prototype.actuate=function(){this.storageManager.getBestScore()<this.score&&this.storageManager.setBestScore(this.score),this.over?this.storageManager.clearGameState():this.storageManager.setGameState(this.serialize()),this.actuator.actuate(this.grid,{score:this.score,over:this.over,won:this.won,bestScore:this.storageManager.getBestScore(),terminated:this.isGameTerminated()})},l.prototype.serialize=function(){return{grid:this.grid.serialize(),score:this.score,over:this.over,won:this.won,keepPlaying:this.keepPlaying}},l.prototype.prepareTiles=function(){this.grid.eachCell(function(t,e,n){n&&(n.mergedFrom=null,n.savePosition())})},l.prototype.moveTile=function(t,e){this.grid.cells[t.x][t.y]=null,(this.grid.cells[e.x][e.y]=t).updatePosition(e)},l.prototype.move=function(t){var o=this;if(!this.isGameTerminated()){var s,a,l=this.getVector(t),e=this.buildTraversals(l),c=!1;this.prepareTiles(),e.x.forEach(function(r){e.y.forEach(function(t){if(s={x:r,y:t},a=o.grid.cellContent(s)){var e=o.findFarthestPosition(s,l),n=o.grid.cellContent(e.next);if(n&&n.value===a.value&&!n.mergedFrom){var i=new u(e.next,2*a.value);i.mergedFrom=[a,n],o.grid.insertTile(i),o.grid.removeTile(a),a.updatePosition(e.next),o.score+=i.value,2048===i.value&&(o.won=!0)}else o.moveTile(a,e.farthest);o.positionsEqual(s,a)||(c=!0)}})}),c&&(this.addRandomTile(),this.movesAvailable()||(this.over=!0),this.actuate())}},l.prototype.getVector=function(t){return{0:{x:0,y:-1},1:{x:1,y:0},2:{x:0,y:1},3:{x:-1,y:0}}[t]},l.prototype.buildTraversals=function(t){for(var e={x:[],y:[]},n=0;n<this.size;n++)e.x.push(n),e.y.push(n);return 1===t.x&&(e.x=e.x.reverse()),1===t.y&&(e.y=e.y.reverse()),e},l.prototype.findFarthestPosition=function(t,e){for(var n;t={x:(n=t).x+e.x,y:n.y+e.y},this.grid.withinBounds(t)&&this.grid.cellAvailable(t););return{farthest:n,next:t}},l.prototype.movesAvailable=function(){return this.grid.cellsAvailable()||this.tileMatchesAvailable()},l.prototype.tileMatchesAvailable=function(){for(var t,e=0;e<this.size;e++)for(var n=0;n<this.size;n++)if(t=this.grid.cellContent({x:e,y:n}))for(var i=0;i<4;i++){var r=this.getVector(i),o={x:e+r.x,y:n+r.y},s=this.grid.cellContent(o);if(s&&s.value===t.value)return!0}return!1},l.prototype.positionsEqual=function(t,e){return t.x===e.x&&t.y===e.y};var c=l;function h(){this.events={},window.navigator.msPointerEnabled?(this.eventTouchstart="MSPointerDown",this.eventTouchmove="MSPointerMove",this.eventTouchend="MSPointerUp"):(this.eventTouchstart="touchstart",this.eventTouchmove="touchmove",this.eventTouchend="touchend"),this.listen()}h.prototype.on=function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)},h.prototype.emit=function(t,e){var n=this.events[t];n&&n.forEach(function(t){t(e)})},h.prototype.listen=function(){var a,l,c=this,i={38:0,39:1,40:2,37:3,75:0,76:1,74:2,72:3,87:0,68:1,83:2,65:3};document.addEventListener("keydown",function(t){var e=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey,n=i[t.which];e||void 0!==n&&(t.preventDefault(),c.emit("move",n)),e||82!==t.which||c.restart.call(c,t)}),this.bindButtonPress(".retry-button",this.restart),this.bindButtonPress(".restart-button",this.restart),this.bindButtonPress(".keep-playing-button",this.keepPlaying);var t=document.getElementsByClassName("game-container")[0];t.addEventListener(this.eventTouchstart,function(t){!window.navigator.msPointerEnabled&&1<t.touches.length||1<t.targetTouches.length||(l=window.navigator.msPointerEnabled?(a=t.pageX,t.pageY):(a=t.touches[0].clientX,t.touches[0].clientY),t.preventDefault())}),t.addEventListener(this.eventTouchmove,function(t){t.preventDefault()}),t.addEventListener(this.eventTouchend,function(t){if(!(!window.navigator.msPointerEnabled&&0<t.touches.length||0<t.targetTouches.length)){var e,n;n=window.navigator.msPointerEnabled?(e=t.pageX,t.pageY):(e=t.changedTouches[0].clientX,t.changedTouches[0].clientY);var i=e-a,r=Math.abs(i),o=n-l,s=Math.abs(o);10<Math.max(r,s)&&c.emit("move",s<r?0<i?1:3:0<o?2:0)}})},h.prototype.restart=function(t){t.preventDefault(),this.emit("restart")},h.prototype.keepPlaying=function(t){t.preventDefault(),this.emit("keepPlaying")},h.prototype.bindButtonPress=function(t,e){var n=document.querySelector(t);n.addEventListener("click",e.bind(this)),n.addEventListener(this.eventTouchend,e.bind(this))};var p=h;function f(){this.tileContainer=document.querySelector(".tile-container"),this.scoreContainer=document.querySelector(".score-container"),this.bestContainer=document.querySelector(".best-container"),this.messageContainer=document.querySelector(".game-message"),this.score=0}f.prototype.actuate=function(t,e){var n=this;window.requestAnimationFrame(function(){n.clearContainer(n.tileContainer),t.cells.forEach(function(t){t.forEach(function(t){t&&n.addTile(t)})}),n.updateScore(e.score),n.updateBestScore(e.bestScore),e.terminated&&(e.over?n.message(!1):e.won&&n.message(!0))})},f.prototype.continueGame=function(){this.clearMessage()},f.prototype.clearContainer=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},f.prototype.addTile=function(t){var e=this,n=document.createElement("div"),i=document.createElement("div"),r=t.previousPosition||{x:t.x,y:t.y},o=this.positionClass(r),s=["tile","tile-"+t.value,o];2048<t.value&&s.push("tile-super"),this.applyClasses(n,s),i.classList.add("tile-inner"),i.textContent=t.value,t.previousPosition?window.requestAnimationFrame(function(){s[2]=e.positionClass({x:t.x,y:t.y}),e.applyClasses(n,s)}):t.mergedFrom?(s.push("tile-merged"),this.applyClasses(n,s),t.mergedFrom.forEach(function(t){e.addTile(t)})):(s.push("tile-new"),this.applyClasses(n,s)),n.appendChild(i),this.tileContainer.appendChild(n)},f.prototype.applyClasses=function(t,e){t.setAttribute("class",e.join(" "))},f.prototype.normalizePosition=function(t){return{x:t.x+1,y:t.y+1}},f.prototype.positionClass=function(t){return"tile-position-"+(t=this.normalizePosition(t)).x+"-"+t.y},f.prototype.updateScore=function(t){this.clearContainer(this.scoreContainer);var e=t-this.score;if(this.score=t,this.scoreContainer.textContent=this.score,0<e){var n=document.createElement("div");n.classList.add("score-addition"),n.textContent="+"+e,this.scoreContainer.appendChild(n)}},f.prototype.updateBestScore=function(t){this.bestContainer.textContent=t},f.prototype.message=function(t){var e=t?"game-won":"game-over",n=t?"You win!":"Game over!";this.messageContainer.classList.add(e),this.messageContainer.getElementsByTagName("p")[0].textContent=n},f.prototype.clearMessage=function(){this.messageContainer.classList.remove("game-won"),this.messageContainer.classList.remove("game-over")};var d=f;window.requestAnimationFrame(function(){new c(4,p,d,a)});window.innerWidth<=520&&n.e(5).then(n.t.bind(null,25,7))},6:function(t,e,n){var i=n(7);"string"==typeof i&&(i=[[t.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(0)(i,r);i.locals&&(t.exports=i.locals)},7:function(t,e,n){}});
//# sourceMappingURL=cards.js.map